#!/bin/bash

echo -e "\e[37mParsing custom functions... See their definition with \`declare -f *\`"


# Loop through all files in the directory
for file in ~/.bashrc.d/*.sh; do
  # Check if the file is a regular file
  if [ -f "$file" ]; then
    echo -e "\e[95m$file\e[0m"

    # echo -e "\e[33m$stow_pkg_rel \t$stow_file_rel\e[0m \t(File exists in system)"
    # Extract function names
    functions=$( grep -nE '^[[:space:]]*([[:alnum:]_]+[[:space:]]*\(\)|function[[:space:]]+[[:alnum:]_]+)' "$file" | awk '{print $1}' | tr -d '()')

    # Print the results
    if [ -n "$functions" ]; then
      echo "$functions"
    fi

    # Extract environment variable names
    # variables=$(grep -oE '[a-zA-Z_][a-zA-Z_0-9]*[[:space:]]*=[[:space:]]*[^[:space:]]+' "$file" | awk -F'=' '{print $1}')

    # if [ -n "$variables" ]; then
    #   echo "Variables in $file: $variables"
    # fi

    echo ""
  fi
done

